<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AstroCode - Pro Editor</title>
    <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; background: #1e1e1e; color: #cccccc; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        .sidebar { width: 50px; background: #333333; display: flex; flex-direction: column; align-items: center; padding-top: 15px; gap: 20px; }
        .explorer { width: 200px; background: #252526; padding: 10px; border-right: 1px solid #3c3c3c; font-size: 12px; }
        .main-editor { flex: 1; display: flex; flex-direction: column; }
        #editor { flex: 1; }
        #terminal { height: 150px; background: #1e1e1e; border-top: 1px solid #3c3c3c; padding: 10px; font-family: 'Consolas', monospace; color: #00ff00; overflow-y: auto; font-size: 13px; }
        .status-bar { height: 22px; background: #007acc; color: white; display: flex; align-items: center; padding: 0 10px; font-size: 12px; justify-content: space-between; }
        .active-tab { background: #1e1e1e; border-top: 1px solid #007acc; color: white; }
    </style>
</head>
<body>

<div class="flex flex-1">
    <div class="sidebar">
        <div class="cursor-pointer opacity-50 hover:opacity-100">üìÑ</div>
        <div class="cursor-pointer opacity-50 hover:opacity-100">üîç</div>
        <div class="cursor-pointer opacity-50 hover:opacity-100">‚öôÔ∏è</div>
    </div>

    <div class="explorer">
        <p class="font-bold uppercase text-gray-500 mb-4 tracking-tighter">Explorer</p>
        <div class="text-blue-400">‚ñº Your Project</div>
        <div class="ml-4 mt-2 cursor-pointer hover:bg-gray-700 p-1 rounded">main.py</div>
        <div class="ml-4 cursor-pointer hover:bg-gray-700 p-1 rounded">index.html</div>
        <div class="ml-4 cursor-pointer hover:bg-gray-700 p-1 rounded">script.js</div>
    </div>

    <div class="main-editor">
        <div class="bg-[#2d2d2d] flex p-1 gap-2 text-xs">
            <div class="active-tab px-4 py-2 cursor-pointer">Editor.code</div>
            <div class="ml-auto flex items-center pr-4">
                <select id="langSelect" class="bg-[#3c3c3c] text-white border-none text-[10px] rounded px-2 py-1 mr-4 outline-none">
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript / Node JS</option>
                    <option value="html">HTML5</option>
                    <option value="css">CSS</option>
                </select>
                <button onclick="runCode()" class="bg-[#0e639c] hover:bg-[#1177bb] text-white px-3 py-1 rounded text-[10px] font-bold">RUN ‚ñ∂</button>
            </div>
        </div>
        <div id="editor"></div>
        <div id="terminal">AstroCode Terminal Ready...<br>> _</div>
    </div>
</div>

<div class="status-bar">
    <div>Ready</div>
    <div>UTF-8 | Ln 1, Col 1</div>
</div>

<script>
let editor;
require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@0.45.0/min/vs' }});
require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(document.getElementById('editor'), {
        value: "print('Hello AstroCode!')",
        language: "python",
        theme: "vs-dark",
        automaticLayout: true,
        fontSize: 14,
        minimap: { enabled: true }
    });
});

async function runCode() {
    const lang = document.getElementById("langSelect").value;
    const code = editor.getValue();
    const terminal = document.getElementById("terminal");
    terminal.innerHTML = "Executing in AstroCode Environment...<br>";

    if(lang === "html" || lang === "css") {
        const win = window.open();
        win.document.write(code);
        terminal.innerHTML += "Preview opened in new tab.";
        return;
    }

    try {
        const response = await fetch("https://emkc.org/api/v2/piston/execute", {
            method: "POST",
            body: JSON.stringify({
                language: lang === "javascript" ? "node" : lang,
                version: "*",
                files: [{ content: code }]
            })
        });
        const data = await response.json();
        terminal.innerHTML += data.run.output || "Execution finished (No output).";
    } catch (err) {
        terminal.innerHTML += "Error: " + err.message;
    }
}
</script>
</body>

</html>
